(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1897:function(e,t,a){},2672:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return D});var n=a(3),i=a.n(n),r=a(47),c=a(13),o=a(14),s=a(24),m=a(22),l=a(23),d=a(33),u=a(0),p=a.n(u),h=a(1896),f=a.n(h),w=(a(1658),a(1897),a(25));function y(){var e=Object(d.a)(["\n@import url('https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.css');\n@import url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');\n"]);return y=function(){return e},e}Object(w.c)(y());var v=!0,E=[],x={"01d":"wi-day-sunny","01n":"wi-night-clear","02d":"wi-day-cloudy","02n":"wi-night-cloudy","03d":"wi-cloud","03n":"wi-cloud","04d":"wi-cloudy","04n":"wi-cloudy","09d":"wi-showers","09n":"wi-showers","10d":"wi-day-hail","10n":"wi-night-hail","11d":"wi-thunderstorm","11n":"wi-thunderstorm","13d":"wi-snow","13n":"wi-snow","50d":"wi-fog","50n":"wi-fog"};function b(){setInterval(function(){f()("#localTime").text((new Date).toLocaleTimeString())},1e3)}function g(e,t){f.a.ajax({type:"GET",url:"https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/forecast/daily?APPID=9b4bbf30228eb8528d36e79d05da1fac&lat="+e+"&lon="+t+"&units=metric&cnt=5",cache:!0,headers:{"Access-Control-Allow-Headers":"x-requested-with"},success:function(e){E=e,N(e),f()("#refreshButton").html("<i class='fa fa-refresh fa-fw'></i> Refresh")},error:function(e){console.log("Error with ajax: "+e)}})}function N(e){var t=e.list[0];f()("#tempDescription").text(C(t.weather[0].description)),f()("#humidity").text(t.humidity),f()("#wind").text(t.speed),f()("#localDate").text(M(t.dt)),f()("#main-icon").addClass(x[t.weather[0].icon]),f()("#mainTemperature").text(Math.round(t.temp.day)),f()("#mainTempHot").text(Math.round(t.temp.max)),f()("#mainTempLow").text(Math.round(t.temp.min));for(var a=1;a<e.list.length;a++){var n=e.list[a],i=M(n.dt).substring(0,3),r=x[n.weather[0].icon];f()("#forecast-day-"+a+"-name").text(i),f()("#forecast-day-"+a+"-icon").addClass(r),f()("#forecast-day-"+a+"-main").text(Math.round(n.temp.day)),f()("#forecast-day-"+a+"-ht").text(Math.round(n.temp.max)),f()("#forecast-day-"+a+"-lt").text(Math.round(n.temp.min))}}function M(e){return new Date(1e3*e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function C(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")}function T(e){return Math.round(5/9*(e-32))}function j(e){var t=1.8*e+32;return Math.round(t)}f()("#refreshButton").on("click",function(){console.log("refreshButton"),f()("#refreshButton").html("<i class='fa fa-refresh fa-spin fa-fw'></i>"),g()}),f()("#celcius").on("click",function(){if(!v){f()("#farenheit").removeClass("active"),this.className="active";var e=E.list[0];e.temp.day=T(e.temp.day),e.temp.max=T(e.temp.max),e.temp.min=T(e.temp.min),E.list[0]=e;for(var t=1;t<5;t++){var a=E.list[t];a.temp.day=T(a.temp.day),a.temp.max=T(a.temp.max),a.temp.min=T(a.temp.min),E[t]=a}N(E),v=!0}}),f()("#farenheit").on("click",function(){if(v){f()("#celcius").removeClass("active"),this.className="active";var e=E.list[0];e.temp.day=j(e.temp.day),e.temp.max=j(e.temp.max),e.temp.min=j(e.temp.min),E.list[0]=e;for(var t=1;t<5;t++){var a=E.list[t];a.temp.day=j(a.temp.day),a.temp.max=j(a.temp.max),a.temp.min=j(a.temp.min),E[t]=a}N(E),v=!1}});var D=function(e){function t(e,a){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e,a))).getweather=function(){var e=Object(r.a)(i.a.mark(function e(t){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=document.getElementById("cityname").value,"8b4a1cfe7b37f251dcce8b232975fd6d",r="https://api.openweathermap.org/data/2.5/forecast?q=".concat(a,"&appid=").concat("8b4a1cfe7b37f251dcce8b232975fd6d"),console.log(r),a?fetch(r).then(function(e){return e.json()}).then(function(e){console.log(e),404===e.cod&&n.showErrorMsg();var t={dataLoaded:!0,city:e.city.name,description:e.list[0].weather[0].description,tempertaure:e.list[0].main.temp,humidity:e.list[0].main.humidity,pressure:e.list[0].main.pressure};console.log("setState",t),n.setState(t),n.updateForecast(e)}).catch(function(e){return console.log("error",e)}):n.setState({dataLoaded:!1,searchcity:"",city:"",description:"",tempertaure:"",pressure:"",humidity:"",error:""});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.updateForecast=function(e){console.log("updateForecast",e),f()("#tempDescription").text(C(e.list[0].weather[0].description)),f()("#localDate").text(M(e.list[0].dt)),f()("#main-icon").addClass(x[e.list[0].weather[0].icon]),f()("#mainTemperature").text(Math.round(e.list[0].main.temp)),f()("#mainTempHot").text(Math.round(e.list[0].main.temp_max)),f()("#mainTempLow").text(Math.round(e.list[0].main.temp_min)),f()("#humidity").text(e.list[0].main.humidity),f()("#wind").text(e.list[0].wind.speed),f()("#cityName").text(e.city.name),f()("#cityCode").text(e.city.country)},n.showErrorMsg=function(){console.log("gfhf"),n.setState({error:"Sorry there is not such city in the list"})},n.onInputChange=function(e){n.setState({dataLoaded:!1,searchcity:e.target.value,city:"",description:"",tempertaure:"",pressure:"",humidity:""})},n.state={dataLoaded:!1,searchcity:"",city:"",description:"",tempertaure:"",pressure:"",humidity:""},console.warn("constructor"),n.textRef=null,n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.warn("componentWillMount")}},{key:"componentDidMount",value:function(){console.warn("componentDidMount"),b()}},{key:"render",value:function(){return p.a.createElement("div",{id:"container-weather",className:"text-center"},p.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},p.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},p.a.createElement("span",{className:"form-inline my-2 my-lg-0 form-signin"},p.a.createElement("input",{name:"cityname",id:"cityname",className:"form-control mr-sm-2",type:"search",placeholder:"Buscar por cidade","aria-label":"Search"}),p.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",onClick:this.getweather},"Procurar")))),this.state.dataLoaded?p.a.createElement("div",{className:"container",id:"wrapper"},p.a.createElement("div",{className:"container-fluid",id:"current-weather"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-md-4 col-sm-5"},p.a.createElement("h5",null,p.a.createElement("span",{id:"cityName"}),", ",p.a.createElement("span",{id:"cityCode"})),p.a.createElement("h6",{id:"localDate"},"\xa0"),p.a.createElement("h5",{id:"localTime"},"\xa0")),p.a.createElement("div",{className:"col-md-5 col-sm-7",id:"main-subicon"},p.a.createElement("div",{className:"row"},p.a.createElement("i",{className:"wi",id:"main-icon"}),p.a.createElement("div",null,p.a.createElement("span",{id:"mainTemperature"}),p.a.createElement("p",{id:"tempDescription"})),p.a.createElement("p",{id:"main-pi"},p.a.createElement("a",{href:"#",className:"active",id:"celcius"},"\xb0C")," | ",p.a.createElement("a",{href:"#",id:"farenheit"},"\xb0F")))),p.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-3 row",id:"main-ino"},p.a.createElement("div",{className:"col-md-12 col-sm-3 col-xs-3 side-weather-info"},p.a.createElement("h6",null,"Umidade: ",p.a.createElement("span",{id:"humidity"}),"%")),p.a.createElement("div",{className:"col-md-12 col-sm-3 col-xs-3 side-weather-info"},p.a.createElement("h6",null,"Vento: ",p.a.createElement("span",{id:"wind"})," m/s")),p.a.createElement("div",{className:"col-md-12 col-sm-3 col-xs-3 side-weather-info"},p.a.createElement("h6",null,"M\xe1xima: ",p.a.createElement("span",{id:"mainTempHot"}),"\xb0")),p.a.createElement("div",{className:"col-md-12 col-sm-3 col-xs-3 side-weather-info"},p.a.createElement("h6",null,"Minima: ",p.a.createElement("span",{id:"mainTempLow"},this.state.city),"\xb0"))))),p.a.createElement("div",{className:"modal fade",id:"protocol-modal",role:"dialog"},p.a.createElement("div",{className:"modal-dialog",role:"document"},p.a.createElement("div",{className:"modal-content"},p.a.createElement("div",{className:"modal-header"},p.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},p.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),p.a.createElement("div",{className:"modal-body"},p.a.createElement("p",null,"Due to weather api restrictions, data can only be shown via HTTP request."),p.a.createElement("p",null,"Sorry for the inconvenience.")),p.a.createElement("div",{className:"modal-footer"},p.a.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close")))))):p.a.createElement("div",null,"\xa0 ..."))}}]),t}(u.Component)}}]);
//# sourceMappingURL=29.7421a2da.chunk.js.map