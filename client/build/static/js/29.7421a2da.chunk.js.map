{"version":3,"sources":["customApp/containers/Weather/index.js"],"names":["injectGlobal","_templateObject","unitIsCelcius","globalForecast","weatherIconsMap","01d","01n","02d","02n","03d","03n","04d","04n","09d","09n","10d","10n","11d","11n","13d","13n","50d","50n","init","setInterval","$","text","Date","toLocaleTimeString","getWeatherData","latitude","longitude","ajax","type","url","cache","headers","Access-Control-Allow-Headers","success","forecast","updateForecast","html","error","console","log","today","list","toCamelCase","weather","description","humidity","speed","getFormattedDate","dt","addClass","icon","Math","round","temp","day","max","min","i","length","dayName","substring","weatherIcon","date","toLocaleDateString","weekday","year","month","str","split","map","sentence","charAt","toUpperCase","join","toCelcius","val","toFerenheit","degrees","on","removeClass","this","className","weekDay","_default","props","context","_this","Object","_home_marcio_dados_git_projects_react_portfolio_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_home_marcio_dados_git_projects_react_portfolio_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_home_marcio_dados_git_projects_react_portfolio_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","getweather","_ref","_home_marcio_dados_git_projects_react_portfolio_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_marcio_dados_git_projects_react_portfolio_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","e","cityname","wrap","_context","prev","next","document","getElementById","value","concat","fetch","then","response","json","data","cod","showErrorMsg","stat","dataLoaded","city","name","tempertaure","main","pressure","setState","catch","searchcity","stop","_x","apply","arguments","temp_max","temp_min","wind","country","onInputChange","target","state","warn","textRef","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","id","placeholder","aria-label","onClick","href","role","data-dismiss","aria-hidden","Component"],"mappings":"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","file":"static/js/29.7421a2da.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport $ from \"jquery\";\n//typical import\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./styles.css\"\n//\nimport { injectGlobal } from \"styled-components\";\ninjectGlobal`\n@import url('https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.css');\n@import url('https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');\n`;\n//\n\n// https://codepen.io/MiguelEnc/pen/vmZVar\n\nvar unitIsCelcius = true;\nvar globalForecast = [];\n\n// Maps the API's icons to the ones from https://erikflowers.github.io/weather-icons/\nvar weatherIconsMap = {\n  \"01d\": \"wi-day-sunny\",\n  \"01n\": \"wi-night-clear\",\n  \"02d\": \"wi-day-cloudy\",\n  \"02n\": \"wi-night-cloudy\",\n  \"03d\": \"wi-cloud\",\n  \"03n\": \"wi-cloud\",\n  \"04d\": \"wi-cloudy\",\n  \"04n\": \"wi-cloudy\",\n  \"09d\": \"wi-showers\",\n  \"09n\": \"wi-showers\",\n  \"10d\": \"wi-day-hail\",\n  \"10n\": \"wi-night-hail\",\n  \"11d\": \"wi-thunderstorm\",\n  \"11n\": \"wi-thunderstorm\",\n  \"13d\": \"wi-snow\",\n  \"13n\": \"wi-snow\",\n  \"50d\": \"wi-fog\",\n  \"50n\": \"wi-fog\"\n};\n\n//$(function(){\n//getClientPosition();\n//startClock();\n//});\n\nfunction init(){\n//  getClientPosition();\n  startClock();\n}\n\nfunction startClock(){\n  setInterval(function(){\n    $(\"#localTime\").text(new Date().toLocaleTimeString());\n  }, 1000);\n}\n\nfunction getClientPosition(){\n  $.getJSON(\"https://ipapi.co/json/\", function(position) {\n    $(\"#cityName\").text(position.city);\n    $(\"#cityCode\").text(position.country);\n\n    getWeatherData(position.latitude, position.longitude);\n  });\n}\n\nfunction getWeatherData(latitude, longitude){\n  $.ajax({\n    type: \"GET\",\n    url: \"https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/forecast/daily?APPID=9b4bbf30228eb8528d36e79d05da1fac&lat=\" + latitude + \"&lon=\" + longitude + \"&units=metric&cnt=5\",\n    cache: true,\n    headers: {\n      \"Access-Control-Allow-Headers\": \"x-requested-with\"\n    },\n    success: function(forecast){\n      globalForecast = forecast;\n      updateForecast(forecast);\n\n      // Stops Refresh button's spinning animation\n      $(\"#refreshButton\").html(\"<i class='fa fa-refresh fa-fw'></i> Refresh\");\n    },\n    error: function(error){\n      console.log(\"Error with ajax: \"+ error);\n    }\n  });\n}\n\n// Update view values from passed forecast\nfunction updateForecast(forecast){\n\n  // Present day\n  var today = forecast.list[0];\n  $(\"#tempDescription\").text(toCamelCase(today.weather[0].description));\n  $(\"#humidity\").text(today.humidity);\n  $(\"#wind\").text(today.speed);\n  $(\"#localDate\").text(getFormattedDate(today.dt));\n  $(\"#main-icon\").addClass(weatherIconsMap[today.weather[0].icon]);\n  $(\"#mainTemperature\").text(Math.round(today.temp.day));\n  $(\"#mainTempHot\").text(Math.round(today.temp.max));\n  $(\"#mainTempLow\").text(Math.round(today.temp.min));\n\n  // Following days data\n  for(var i = 1; i < (forecast.list).length; i++){\n    var day = forecast.list[i];\n\n    // Day short format e.g. Mon\n    var dayName = getFormattedDate(day.dt).substring(0,3);\n\n    // weather icon from map\n    var weatherIcon = weatherIconsMap[day.weather[0].icon];\n\n    $(\"#forecast-day-\" + i + \"-name\").text(dayName);\n    $(\"#forecast-day-\" + i + \"-icon\").addClass(weatherIcon);\n    $(\"#forecast-day-\" + i + \"-main\").text(Math.round(day.temp.day));\n    $(\"#forecast-day-\" + i + \"-ht\").text(Math.round(day.temp.max));\n    $(\"#forecast-day-\" + i + \"-lt\").text(Math.round(day.temp.min));\n  }\n}\n\n// Refresh button handler\n$(\"#refreshButton\").on(\"click\", function(){\n  console.log('refreshButton');\n  // Starts Refresh button's spinning animation\n  $(\"#refreshButton\").html(\"<i class='fa fa-refresh fa-spin fa-fw'></i>\");\n  getWeatherData();\n});\n\n// Celcius button handler.\n// Converts every shown value to Celcius\n$(\"#celcius\").on(\"click\", function(){\n  if(!unitIsCelcius){\n    $(\"#farenheit\").removeClass(\"active\");\n    this.className = \"active\";\n\n    // main day\n    var today = globalForecast.list[0];\n    today.temp.day = toCelcius(today.temp.day);\n    today.temp.max = toCelcius(today.temp.max);\n    today.temp.min = toCelcius(today.temp.min);\n    globalForecast.list[0] = today;\n\n    // week\n    for(var i = 1; i < 5; i ++){\n      var weekDay = globalForecast.list[i];\n      weekDay.temp.day = toCelcius(weekDay.temp.day);\n      weekDay.temp.max = toCelcius(weekDay.temp.max);\n      weekDay.temp.min = toCelcius(weekDay.temp.min);\n      globalForecast[i] = weekDay;\n    }\n\n    // update view with updated values\n    updateForecast(globalForecast);\n\n    unitIsCelcius = true;\n  }\n});\n\n// Farenheit button handler\n// Converts every shown value to Farenheit\n$(\"#farenheit\").on(\"click\", function(){\n  if(unitIsCelcius){\n    $(\"#celcius\").removeClass(\"active\");\n    this.className = \"active\";\n\n    // main day\n    var today = globalForecast.list[0];\n    today.temp.day = toFerenheit(today.temp.day);\n    today.temp.max = toFerenheit(today.temp.max);\n    today.temp.min = toFerenheit(today.temp.min);\n    globalForecast.list[0] = today;\n\n    // week\n    for(var i = 1; i < 5; i ++){\n      var weekDay = globalForecast.list[i];\n      weekDay.temp.day = toFerenheit(weekDay.temp.day);\n      weekDay.temp.max = toFerenheit(weekDay.temp.max);\n      weekDay.temp.min = toFerenheit(weekDay.temp.min);\n      globalForecast[i] = weekDay;\n    }\n\n    // update view with updated values\n    updateForecast(globalForecast);\n\n    unitIsCelcius = false;\n  }\n});\n\n// Applies the following format to date: WeekDay, Month Day, Year\nfunction getFormattedDate(date){\n  var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n  return new Date(date * 1000).toLocaleDateString(\"en-US\",options);\n}\n\n// Formats the text to CamelCase\nfunction toCamelCase(str) {\n  var arr = str.split(\" \").map(\n    function(sentence){\n      return sentence.charAt(0).toUpperCase() + sentence.substring(1);\n    }\n  );\n  return arr.join(\" \");\n}\n\n// Converts to Celcius\nfunction toCelcius(val){\n  return Math.round((val - 32) * (5/9));\n}\n\n// Converts to Farenheit\nfunction toFerenheit(val){\n  var degrees = (val * 1.8) + 32;\n  var rounded = Math.round(degrees);\n  return rounded;\n}\n\n// https://codepen.io/MiguelEnc/pen/vmZVar\n\nexport default class extends Component {\n  constructor(props, context) {\n    super(props, context);\n    console.warn('constructor');\n    this.textRef = null;\n  }\n  componentWillMount() {\n    console.warn('componentWillMount');\n\n  }\n  componentDidMount() {\n    console.warn('componentDidMount');\n    init();\n  }\n\n  // https://codepen.io/MiguelEnc/pen/vmZVar\n  getweather = async e => {\n    const cityname = document.getElementById(\"cityname\").value;\n    const api_key = \"8b4a1cfe7b37f251dcce8b232975fd6d\";\n    //const url = `https://api.openweathermap.org/data/2.5/weather?q=${cityname}&appid=${api_key}`;\n    const url = `https://api.openweathermap.org/data/2.5/forecast?q=${cityname}&appid=${api_key}`;\n    console.log(url);\n    if (cityname) {\n      fetch(url)\n        .then(response => response.json())\n        .then(data => {\n          console.log(data);\n          if (data.cod === 404) {\n            this.showErrorMsg();\n          }\n          var stat = {\n            dataLoaded: true,\n            city: data.city.name,\n            description: data.list[0].weather[0].description,\n            tempertaure: data.list[0].main.temp,\n            humidity: data.list[0].main.humidity,\n            pressure: data.list[0].main.pressure\n          };\n          console.log(\"setState\", stat)\n          this.setState(stat);\n          this.updateForecast(data);\n        })\n        .catch(e => console.log(\"error\", e));\n    } else {\n      this.setState({\n        dataLoaded: false,\n        searchcity: \"\",\n        city: \"\",\n        description: \"\",\n        tempertaure: \"\",\n        pressure: \"\",\n        humidity: \"\",\n        error: \"\"\n      });\n    }\n  };\nupdateForecast = (forecast) => {\n  console.log('updateForecast',forecast);\n\n  // Present day\n  $(\"#tempDescription\").text(toCamelCase(forecast.list[0].weather[0].description));\n  $(\"#localDate\").text(getFormattedDate(forecast.list[0].dt));\n  $(\"#main-icon\").addClass(weatherIconsMap[forecast.list[0].weather[0].icon]);\n  $(\"#mainTemperature\").text(Math.round(forecast.list[0].main.temp));\n  $(\"#mainTempHot\").text(Math.round(forecast.list[0].main.temp_max));\n  $(\"#mainTempLow\").text(Math.round(forecast.list[0].main.temp_min));\n  $(\"#humidity\").text(forecast.list[0].main.humidity);\n  $(\"#wind\").text(forecast.list[0].wind.speed);\n  $(\"#cityName\").text(forecast.city.name);\n  $(\"#cityCode\").text(forecast.city.country);\n\n  // Following days data\n  /*for(var i = 1; i < (forecast.list).length; i++){\n    var day = forecast.list[i];\n\n    // Day short format e.g. Mon\n    var dayName = getFormattedDate(day.dt).substring(0,3);\n\n    // weather icon from map\n    var weatherIcon = weatherIconsMap[day.weather[0].icon];\n\n    $(\"#forecast-day-\" + i + \"-name\").text(dayName);\n    $(\"#forecast-day-\" + i + \"-icon\").addClass(weatherIcon);\n    $(\"#forecast-day-\" + i + \"-main\").text(Math.round(day.temp.day));\n    $(\"#forecast-day-\" + i + \"-ht\").text(Math.round(day.temp.max));\n    $(\"#forecast-day-\" + i + \"-lt\").text(Math.round(day.temp.min));\n  }*/\n};\n  showErrorMsg = () => {\n    console.log(\"gfhf\");\n    this.setState({\n      error: \"Sorry there is not such city in the list\"\n    });\n  };\n  onInputChange = e => {\n    this.setState({\n      dataLoaded: false,\n      searchcity: e.target.value,\n      city: \"\",\n      description: \"\",\n      tempertaure: \"\",\n      pressure: \"\",\n      humidity: \"\"\n    });\n  };\n  state = {\n    dataLoaded: false,\n    searchcity: \"\",\n    city: \"\",\n    description: \"\",\n    tempertaure: \"\",\n    pressure: \"\",\n    humidity: \"\"\n  };\n\n  render () {\n    return (\n      <div id=\"container-weather\" className=\"text-center\">\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n          <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <span className=\"form-inline my-2 my-lg-0 form-signin\">\n              <input name=\"cityname\" id=\"cityname\" className=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Buscar por cidade\" aria-label=\"Search\" />\n              <button className=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\" onClick={this.getweather}>Procurar</button>\n            </span>\n          </div>\n        </nav>\n        {\n          !this.state.dataLoaded ? \n            <div>&nbsp; ...</div>\n            : \n           <div className=\"container\" id=\"wrapper\">\n           <div className=\"container-fluid\" id=\"current-weather\">\n             <div className=\"row\">\n               <div className=\"col-md-4 col-sm-5\">\n                 <h5><span id=\"cityName\"></span>, <span id=\"cityCode\"></span></h5>\n                 <h6 id=\"localDate\">&nbsp;</h6>\n                 <h5 id=\"localTime\">&nbsp;</h5>\n                 {/*<a id=\"refreshButton\" href=\"#\"><i className=\"fa fa-refresh fa-fw\" aria-hidden=\"true\"></i> Refresh</a>*/}\n               </div>\n               <div className=\"col-md-5 col-sm-7\" id=\"main-subicon\">\n                 <div className=\"row\">\n                   <i className=\"wi\" id=\"main-icon\"></i>\n                   <div>\n                     <span id=\"mainTemperature\"></span>\n                     <p id=\"tempDescription\"></p>\n                   </div>\n                   <p id=\"main-pi\"><a href=\"#\" className=\"active\" id=\"celcius\">°C</a> | <a href=\"#\" id=\"farenheit\">°F</a></p>\n                 </div>\n               </div>\n               <div className=\"col-xs-12 col-sm-12 col-md-3 row\" id=\"main-ino\">\n                 <div className=\"col-md-12 col-sm-3 col-xs-3 side-weather-info\">\n                   <h6>Umidade: <span id=\"humidity\"></span>%</h6>\n                 </div>\n                 <div className=\"col-md-12 col-sm-3 col-xs-3 side-weather-info\">\n                   <h6>Vento: <span id=\"wind\"></span> m/s</h6>\n                 </div>\n                 <div className=\"col-md-12 col-sm-3 col-xs-3 side-weather-info\">\n                   <h6>Máxima: <span id=\"mainTempHot\"></span>°</h6>\n                 </div>\n                 <div className=\"col-md-12 col-sm-3 col-xs-3 side-weather-info\">\n                   <h6>Minima: <span id=\"mainTempLow\">{this.state.city}</span>°</h6>\n                 </div>\n               </div>\n             </div>\n           </div>\n           <div className=\"modal fade\" id=\"protocol-modal\" role=\"dialog\">\n             <div className=\"modal-dialog\" role=\"document\">\n               <div className=\"modal-content\">\n                 <div className=\"modal-header\">\n                   <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                 </div>\n                 <div className=\"modal-body\">\n                   <p>Due to weather api restrictions, data can only be shown via HTTP request.</p>\n                   <p>Sorry for the inconvenience.</p>\n                 </div>\n                 <div className=\"modal-footer\">\n                   <button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                 </div>\n               </div>\n             </div>\n           </div>\n         </div>\n        }\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}