{"version":3,"sources":["customApp/containers/Aviator/game.js"],"names":["game","scene","camera","aspectRatio","renderer","Colors","deltaTime","newTime","Date","getTime","oldTime","ennemiesPool","particlesPool","resetGame","speed","initSpeed","baseSpeed","targetBaseSpeed","incrementSpeedByTime","incrementSpeedByLevel","distanceForSpeedUpdate","speedLastUpdate","distance","ratioSpeedDistance","energy","ratioSpeedEnergy","level","levelLastUpdate","distanceForLevelUpdate","planeDefaultHeight","planeAmpHeight","planeAmpWidth","planeMoveSensivity","planeRotXSensivity","planeRotZSensivity","planeFallSpeed","planeMinSpeed","planeMaxSpeed","planeSpeed","planeCollisionDisplacementX","planeCollisionSpeedX","planeCollisionDisplacementY","planeCollisionSpeedY","seaRadius","seaLength","wavesMinAmp","wavesMaxAmp","wavesMinSpeed","wavesMaxSpeed","cameraFarPos","cameraNearPos","cameraSensivity","coinDistanceTolerance","coinValue","coinsSpeed","coinLastSpawn","distanceForCoinsSpawn","ennemyDistanceTolerance","ennemyValue","ennemiesSpeed","ennemyLastSpawn","distanceForEnnemiesSpawn","status","fieldLevel","innerHTML","Math","floor","HEIGHT","WIDTH","ambientLight","hemisphereLight","shadowLight","mousePos","x","y","handleWindowResize","window","innerHeight","innerWidth","setSize","aspect","updateProjectionMatrix","handleMouseMove","event","tx","clientX","ty","clientY","handleTouchMove","preventDefault","touches","pageX","pageY","handleMouseUp","hideReplay","handleTouchEnd","Pilot","this","mesh","THREE","name","angleHairs","bodyGeom","bodyMat","color","shading","body","position","set","add","faceGeom","faceMat","face","hairGeom","hairMat","hair","geometry","applyMatrix","makeTranslation","hairs","hairsTop","i","h","clone","col","row","makeScale","hairSideGeom","hairSideR","hairSideL","hairBackGeom","hairBack","glassGeom","glassMat","glassR","glassL","z","glassAGeom","glassA","earGeom","earL","earR","prototype","updateHairs","children","l","length","scale","cos","AirPlane","geomCabin","matCabin","vertices","cabin","castShadow","receiveShadow","geomEngine","matEngine","engine","geomTailPlane","matTailPlane","tailPlane","geomSideWing","matSideWing","sideWing","geomWindshield","matWindshield","transparent","opacity","windshield","geomPropeller","matPropeller","propeller","geomBlade","matBlade","blade1","blade2","rotation","PI","wheelProtecGeom","wheelProtecMat","wheelProtecR","wheelTireGeom","wheelTireMat","wheelTireR","wheelAxisGeom","wheelAxisMat","wheelAxis","wheelProtecL","wheelTireL","wheelTireB","suspensionGeom","suspensionMat","suspension","pilot","Sky","nClouds","clouds","stepAngle","c","Cloud","push","a","random","sin","s","moveClouds","rotate","Sea","geom","makeRotationX","mergeVertices","waves","v","ang","amp","mat","moveWaves","verts","vprops","verticesNeedUpdate","nBlocs","m","particlesHolder","coinsHolder","ennemiesHolder","Ennemy","shininess","specular","angle","dist","EnnemiesHolder","ennemiesInUse","spawnEnnemies","nEnnemies","ennemy","pop","rotateEnnemies","diffPos","airplane","sub","d","spawnParticles","unshift","splice","remove","intensity","removeEnergy","Particle","explode","pos","_this","_p","parent","material","needsUpdate","targetX","targetY","TweenMax","to","delay","ease","Power2","easeOut","onComplete","ParticlesHolder","particlesInUse","density","nPArticles","particle","visible","sea","sky","fieldDistance","energyBar","replayMessage","levelCircle","Coin","CoinsHolder","nCoins","coinsInUse","coinsPool","coin","loop","spawnCoins","normalize","fov","updatePlane","setAttribute","updateDistance","max","style","right","backgroundColor","animationName","updateEnergy","display","rotateCoins","render","requestAnimationFrame","addEnergy","min","vmin","vmax","tmin","tmax","init","document","getElementById","fog","alpha","antialias","shadowMap","enabled","appendChild","domElement","addEventListener","shadow","left","top","bottom","near","far","mapSize","width","height","createEnnemies","createParticles","amplitude","round","exploding","_default","props","context","Object","_home_marcio_dados_git_projects_react_base_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_marcio_dados_git_projects_react_base_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_marcio_dados_git_projects_react_base_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","console","warn","textRef","threeRootElement","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","className","id","viewBox","r","cx","cy","fill","stroke","strokeWidth","strokeDasharray","Component"],"mappings":"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","file":"static/js/29.af284dd0.chunk.js","sourcesContent":["import React, { Component } from 'react';\n//typical import\nimport * as THREE from 'three';\nimport {TweenMax, Power2} from \"gsap/all\";\nimport \"./demo.css\"\nimport \"./game.css\"\n\n// https://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n\n//COLORS\nvar Colors = {\n    red:0xf25346,\n    white:0xd8d0d1,\n    brown:0x59332e,\n    brownDark:0x23190f,\n    pink:0xF5986E,\n    yellow:0xf4ce93,\n    blue:0x68c3c0,\n\n};\n\n///////////////\n\n// GAME VARIABLES\nvar game;\nvar deltaTime = 0;\nvar newTime = new Date().getTime();\nvar oldTime = new Date().getTime();\nvar ennemiesPool = [];\nvar particlesPool = [];\nvar particlesInUse = [];\n\nfunction resetGame(){\n  game = {speed:0,\n          initSpeed:.00035,\n          baseSpeed:.00035,\n          targetBaseSpeed:.00035,\n          incrementSpeedByTime:.0000025,\n          incrementSpeedByLevel:.000005,\n          distanceForSpeedUpdate:100,\n          speedLastUpdate:0,\n\n          distance:0,\n          ratioSpeedDistance:50,\n          energy:100,\n          ratioSpeedEnergy:3,\n\n          level:1,\n          levelLastUpdate:0,\n          distanceForLevelUpdate:1000,\n\n          planeDefaultHeight:100,\n          planeAmpHeight:80,\n          planeAmpWidth:75,\n          planeMoveSensivity:0.005,\n          planeRotXSensivity:0.0008,\n          planeRotZSensivity:0.0004,\n          planeFallSpeed:.001,\n          planeMinSpeed:1.2,\n          planeMaxSpeed:1.6,\n          planeSpeed:0,\n          planeCollisionDisplacementX:0,\n          planeCollisionSpeedX:0,\n\n          planeCollisionDisplacementY:0,\n          planeCollisionSpeedY:0,\n\n          seaRadius:600,\n          seaLength:800,\n          //seaRotationSpeed:0.006,\n          wavesMinAmp : 5,\n          wavesMaxAmp : 20,\n          wavesMinSpeed : 0.001,\n          wavesMaxSpeed : 0.003,\n\n          cameraFarPos:500,\n          cameraNearPos:150,\n          cameraSensivity:0.002,\n\n          coinDistanceTolerance:15,\n          coinValue:3,\n          coinsSpeed:.5,\n          coinLastSpawn:0,\n          distanceForCoinsSpawn:100,\n\n          ennemyDistanceTolerance:10,\n          ennemyValue:10,\n          ennemiesSpeed:.6,\n          ennemyLastSpawn:0,\n          distanceForEnnemiesSpawn:50,\n\n          status : \"playing\",\n         };\n  fieldLevel.innerHTML = Math.floor(game.level);\n}\n\n//THREEJS RELATED VARIABLES\n\nvar scene,\n    camera, fieldOfView, aspectRatio, nearPlane, farPlane,\n    renderer,\n    container,\n    controls;\n\n//SCREEN & MOUSE VARIABLES\n\nvar HEIGHT, WIDTH,\n    mousePos = { x: 0, y: 0 };\n\n//INIT THREE JS, SCREEN AND MOUSE EVENTS\n\nfunction createScene() {\n\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n\n  scene = new THREE.Scene();\n  aspectRatio = WIDTH / HEIGHT;\n  fieldOfView = 50;\n  nearPlane = .1;\n  farPlane = 10000;\n  camera = new THREE.PerspectiveCamera(\n    fieldOfView,\n    aspectRatio,\n    nearPlane,\n    farPlane\n    );\n  scene.fog = new THREE.Fog(0xf7d9aa, 100,950);\n  camera.position.x = 0;\n  camera.position.z = 200;\n  camera.position.y = game.planeDefaultHeight;\n  //camera.lookAt(new THREE.Vector3(0, 400, 0));\n\n  renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n  renderer.setSize(WIDTH, HEIGHT);\n\n  renderer.shadowMap.enabled = true;\n\n  container = document.getElementById('world');\n  container.appendChild(renderer.domElement);\n\n  window.addEventListener('resize', handleWindowResize, false);\n\n  /*\n  controls = new THREE.OrbitControls(camera, renderer.domElement);\n  controls.minPolarAngle = -Math.PI / 2;\n  controls.maxPolarAngle = Math.PI ;\n\n  //controls.noZoom = true;\n  //controls.noPan = true;\n  //*/\n}\n\n// MOUSE AND SCREEN EVENTS\n\nfunction handleWindowResize() {\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  renderer.setSize(WIDTH, HEIGHT);\n  camera.aspect = WIDTH / HEIGHT;\n  camera.updateProjectionMatrix();\n}\n\nfunction handleMouseMove(event) {\n  var tx = -1 + (event.clientX / WIDTH)*2;\n  var ty = 1 - (event.clientY / HEIGHT)*2;\n  mousePos = {x:tx, y:ty};\n}\n\nfunction handleTouchMove(event) {\n    event.preventDefault();\n    var tx = -1 + (event.touches[0].pageX / WIDTH)*2;\n    var ty = 1 - (event.touches[0].pageY / HEIGHT)*2;\n    mousePos = {x:tx, y:ty};\n}\n\nfunction handleMouseUp(event){\n  if (game.status === \"waitingReplay\"){\n    resetGame();\n    hideReplay();\n  }\n}\n\n\nfunction handleTouchEnd(event){\n  if (game.status === \"waitingReplay\"){\n    resetGame();\n    hideReplay();\n  }\n}\n\n// LIGHTS\n\nvar ambientLight, hemisphereLight, shadowLight;\n\nfunction createLights() {\n\n  hemisphereLight = new THREE.HemisphereLight(0xaaaaaa,0x000000, .9)\n\n  ambientLight = new THREE.AmbientLight(0xdc8874, .5);\n\n  shadowLight = new THREE.DirectionalLight(0xffffff, .9);\n  shadowLight.position.set(150, 350, 350);\n  shadowLight.castShadow = true;\n  shadowLight.shadow.camera.left = -400;\n  shadowLight.shadow.camera.right = 400;\n  shadowLight.shadow.camera.top = 400;\n  shadowLight.shadow.camera.bottom = -400;\n  shadowLight.shadow.camera.near = 1;\n  shadowLight.shadow.camera.far = 1000;\n  shadowLight.shadow.mapSize.width = 4096;\n  shadowLight.shadow.mapSize.height = 4096;\n\n  var ch = new THREE.CameraHelper(shadowLight.shadow.camera);\n\n  //scene.add(ch);\n  scene.add(hemisphereLight);\n  scene.add(shadowLight);\n  scene.add(ambientLight);\n\n}\n\n\nvar Pilot = function(){\n  this.mesh = new THREE.Object3D();\n  this.mesh.name = \"pilot\";\n  this.angleHairs=0;\n\n  var bodyGeom = new THREE.BoxGeometry(15,15,15);\n  var bodyMat = new THREE.MeshPhongMaterial({color:Colors.brown, shading:THREE.FlatShading});\n  var body = new THREE.Mesh(bodyGeom, bodyMat);\n  body.position.set(2,-12,0);\n\n  this.mesh.add(body);\n\n  var faceGeom = new THREE.BoxGeometry(10,10,10);\n  var faceMat = new THREE.MeshLambertMaterial({color:Colors.pink});\n  var face = new THREE.Mesh(faceGeom, faceMat);\n  this.mesh.add(face);\n\n  var hairGeom = new THREE.BoxGeometry(4,4,4);\n  var hairMat = new THREE.MeshLambertMaterial({color:Colors.brown});\n  var hair = new THREE.Mesh(hairGeom, hairMat);\n  hair.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(0,2,0));\n  var hairs = new THREE.Object3D();\n\n  this.hairsTop = new THREE.Object3D();\n\n  for (var i=0; i<12; i++){\n    var h = hair.clone();\n    var col = i%3;\n    var row = Math.floor(i/3);\n    var startPosZ = -4;\n    var startPosX = -4;\n    h.position.set(startPosX + row*4, 0, startPosZ + col*4);\n    h.geometry.applyMatrix(new THREE.Matrix4().makeScale(1,1,1));\n    this.hairsTop.add(h);\n  }\n  hairs.add(this.hairsTop);\n\n  var hairSideGeom = new THREE.BoxGeometry(12,4,2);\n  hairSideGeom.applyMatrix(new THREE.Matrix4().makeTranslation(-6,0,0));\n  var hairSideR = new THREE.Mesh(hairSideGeom, hairMat);\n  var hairSideL = hairSideR.clone();\n  hairSideR.position.set(8,-2,6);\n  hairSideL.position.set(8,-2,-6);\n  hairs.add(hairSideR);\n  hairs.add(hairSideL);\n\n  var hairBackGeom = new THREE.BoxGeometry(2,8,10);\n  var hairBack = new THREE.Mesh(hairBackGeom, hairMat);\n  hairBack.position.set(-1,-4,0)\n  hairs.add(hairBack);\n  hairs.position.set(-5,5,0);\n\n  this.mesh.add(hairs);\n\n  var glassGeom = new THREE.BoxGeometry(5,5,5);\n  var glassMat = new THREE.MeshLambertMaterial({color:Colors.brown});\n  var glassR = new THREE.Mesh(glassGeom,glassMat);\n  glassR.position.set(6,0,3);\n  var glassL = glassR.clone();\n  glassL.position.z = -glassR.position.z\n\n  var glassAGeom = new THREE.BoxGeometry(11,1,11);\n  var glassA = new THREE.Mesh(glassAGeom, glassMat);\n  this.mesh.add(glassR);\n  this.mesh.add(glassL);\n  this.mesh.add(glassA);\n\n  var earGeom = new THREE.BoxGeometry(2,3,2);\n  var earL = new THREE.Mesh(earGeom,faceMat);\n  earL.position.set(0,0,-6);\n  var earR = earL.clone();\n  earR.position.set(0,0,6);\n  this.mesh.add(earL);\n  this.mesh.add(earR);\n}\n\nPilot.prototype.updateHairs = function(){\n  //*\n   var hairs = this.hairsTop.children;\n\n   var l = hairs.length;\n   for (var i=0; i<l; i++){\n      var h = hairs[i];\n      h.scale.y = .75 + Math.cos(this.angleHairs+i/3)*.25;\n   }\n  this.angleHairs += game.speed*deltaTime*40;\n  //*/\n}\n\nvar AirPlane = function(){\n  this.mesh = new THREE.Object3D();\n  this.mesh.name = \"airPlane\";\n\n  // Cabin\n\n  var geomCabin = new THREE.BoxGeometry(80,50,50,1,1,1);\n  var matCabin = new THREE.MeshPhongMaterial({color:Colors.red, shading:THREE.FlatShading});\n\n  geomCabin.vertices[4].y-=10;\n  geomCabin.vertices[4].z+=20;\n  geomCabin.vertices[5].y-=10;\n  geomCabin.vertices[5].z-=20;\n  geomCabin.vertices[6].y+=30;\n  geomCabin.vertices[6].z+=20;\n  geomCabin.vertices[7].y+=30;\n  geomCabin.vertices[7].z-=20;\n\n  var cabin = new THREE.Mesh(geomCabin, matCabin);\n  cabin.castShadow = true;\n  cabin.receiveShadow = true;\n  this.mesh.add(cabin);\n\n  // Engine\n\n  var geomEngine = new THREE.BoxGeometry(20,50,50,1,1,1);\n  var matEngine = new THREE.MeshPhongMaterial({color:Colors.white, shading:THREE.FlatShading});\n  var engine = new THREE.Mesh(geomEngine, matEngine);\n  engine.position.x = 50;\n  engine.castShadow = true;\n  engine.receiveShadow = true;\n  this.mesh.add(engine);\n\n  // Tail Plane\n\n  var geomTailPlane = new THREE.BoxGeometry(15,20,5,1,1,1);\n  var matTailPlane = new THREE.MeshPhongMaterial({color:Colors.red, shading:THREE.FlatShading});\n  var tailPlane = new THREE.Mesh(geomTailPlane, matTailPlane);\n  tailPlane.position.set(-40,20,0);\n  tailPlane.castShadow = true;\n  tailPlane.receiveShadow = true;\n  this.mesh.add(tailPlane);\n\n  // Wings\n\n  var geomSideWing = new THREE.BoxGeometry(30,5,120,1,1,1);\n  var matSideWing = new THREE.MeshPhongMaterial({color:Colors.red, shading:THREE.FlatShading});\n  var sideWing = new THREE.Mesh(geomSideWing, matSideWing);\n  sideWing.position.set(0,15,0);\n  sideWing.castShadow = true;\n  sideWing.receiveShadow = true;\n  this.mesh.add(sideWing);\n\n  var geomWindshield = new THREE.BoxGeometry(3,15,20,1,1,1);\n  var matWindshield = new THREE.MeshPhongMaterial({color:Colors.white,transparent:true, opacity:.3, shading:THREE.FlatShading});;\n  var windshield = new THREE.Mesh(geomWindshield, matWindshield);\n  windshield.position.set(5,27,0);\n\n  windshield.castShadow = true;\n  windshield.receiveShadow = true;\n\n  this.mesh.add(windshield);\n\n  var geomPropeller = new THREE.BoxGeometry(20,10,10,1,1,1);\n  geomPropeller.vertices[4].y-=5;\n  geomPropeller.vertices[4].z+=5;\n  geomPropeller.vertices[5].y-=5;\n  geomPropeller.vertices[5].z-=5;\n  geomPropeller.vertices[6].y+=5;\n  geomPropeller.vertices[6].z+=5;\n  geomPropeller.vertices[7].y+=5;\n  geomPropeller.vertices[7].z-=5;\n  var matPropeller = new THREE.MeshPhongMaterial({color:Colors.brown, shading:THREE.FlatShading});\n  this.propeller = new THREE.Mesh(geomPropeller, matPropeller);\n\n  this.propeller.castShadow = true;\n  this.propeller.receiveShadow = true;\n\n  var geomBlade = new THREE.BoxGeometry(1,80,10,1,1,1);\n  var matBlade = new THREE.MeshPhongMaterial({color:Colors.brownDark, shading:THREE.FlatShading});\n  var blade1 = new THREE.Mesh(geomBlade, matBlade);\n  blade1.position.set(8,0,0);\n\n  blade1.castShadow = true;\n  blade1.receiveShadow = true;\n\n  var blade2 = blade1.clone();\n  blade2.rotation.x = Math.PI/2;\n\n  blade2.castShadow = true;\n  blade2.receiveShadow = true;\n\n  this.propeller.add(blade1);\n  this.propeller.add(blade2);\n  this.propeller.position.set(60,0,0);\n  this.mesh.add(this.propeller);\n\n  var wheelProtecGeom = new THREE.BoxGeometry(30,15,10,1,1,1);\n  var wheelProtecMat = new THREE.MeshPhongMaterial({color:Colors.red, shading:THREE.FlatShading});\n  var wheelProtecR = new THREE.Mesh(wheelProtecGeom,wheelProtecMat);\n  wheelProtecR.position.set(25,-20,25);\n  this.mesh.add(wheelProtecR);\n\n  var wheelTireGeom = new THREE.BoxGeometry(24,24,4);\n  var wheelTireMat = new THREE.MeshPhongMaterial({color:Colors.brownDark, shading:THREE.FlatShading});\n  var wheelTireR = new THREE.Mesh(wheelTireGeom,wheelTireMat);\n  wheelTireR.position.set(25,-28,25);\n\n  var wheelAxisGeom = new THREE.BoxGeometry(10,10,6);\n  var wheelAxisMat = new THREE.MeshPhongMaterial({color:Colors.brown, shading:THREE.FlatShading});\n  var wheelAxis = new THREE.Mesh(wheelAxisGeom,wheelAxisMat);\n  wheelTireR.add(wheelAxis);\n\n  this.mesh.add(wheelTireR);\n\n  var wheelProtecL = wheelProtecR.clone();\n  wheelProtecL.position.z = -wheelProtecR.position.z ;\n  this.mesh.add(wheelProtecL);\n\n  var wheelTireL = wheelTireR.clone();\n  wheelTireL.position.z = -wheelTireR.position.z;\n  this.mesh.add(wheelTireL);\n\n  var wheelTireB = wheelTireR.clone();\n  wheelTireB.scale.set(.5,.5,.5);\n  wheelTireB.position.set(-35,-5,0);\n  this.mesh.add(wheelTireB);\n\n  var suspensionGeom = new THREE.BoxGeometry(4,20,4);\n  suspensionGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0,10,0))\n  var suspensionMat = new THREE.MeshPhongMaterial({color:Colors.red, shading:THREE.FlatShading});\n  var suspension = new THREE.Mesh(suspensionGeom,suspensionMat);\n  suspension.position.set(-35,-5,0);\n  suspension.rotation.z = -.3;\n  this.mesh.add(suspension);\n\n  this.pilot = new Pilot();\n  this.pilot.mesh.position.set(-10,27,0);\n  this.mesh.add(this.pilot.mesh);\n\n\n  this.mesh.castShadow = true;\n  this.mesh.receiveShadow = true;\n\n};\n\nvar Sky = function(){\n  this.mesh = new THREE.Object3D();\n  this.nClouds = 20;\n  this.clouds = [];\n  var stepAngle = Math.PI*2 / this.nClouds;\n  for(var i=0; i<this.nClouds; i++){\n    var c = new Cloud();\n    this.clouds.push(c);\n    var a = stepAngle*i;\n    var h = game.seaRadius + 150 + Math.random()*200;\n    c.mesh.position.y = Math.sin(a)*h;\n    c.mesh.position.x = Math.cos(a)*h;\n    c.mesh.position.z = -300-Math.random()*500;\n    c.mesh.rotation.z = a + Math.PI/2;\n    var s = 1+Math.random()*2;\n    c.mesh.scale.set(s,s,s);\n    this.mesh.add(c.mesh);\n  }\n}\n\nSky.prototype.moveClouds = function(){\n  for(var i=0; i<this.nClouds; i++){\n    var c = this.clouds[i];\n    c.rotate();\n  }\n  this.mesh.rotation.z += game.speed*deltaTime;\n\n}\n\nvar Sea = function(){\n  var geom = new THREE.CylinderGeometry(game.seaRadius,game.seaRadius,game.seaLength,40,10);\n  geom.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI/2));\n  geom.mergeVertices();\n  var l = geom.vertices.length;\n\n  this.waves = [];\n\n  for (var i=0;i<l;i++){\n    var v = geom.vertices[i];\n    //v.y = Math.random()*30;\n    this.waves.push({y:v.y,\n                     x:v.x,\n                     z:v.z,\n                     ang:Math.random()*Math.PI*2,\n                     amp:game.wavesMinAmp + Math.random()*(game.wavesMaxAmp-game.wavesMinAmp),\n                     speed:game.wavesMinSpeed + Math.random()*(game.wavesMaxSpeed - game.wavesMinSpeed)\n                    });\n  };\n  var mat = new THREE.MeshPhongMaterial({\n    color:Colors.blue,\n    transparent:true,\n    opacity:.8,\n    shading:THREE.FlatShading,\n\n  });\n\n  this.mesh = new THREE.Mesh(geom, mat);\n  this.mesh.name = \"waves\";\n  this.mesh.receiveShadow = true;\n\n}\n\nSea.prototype.moveWaves = function (){\n  var verts = this.mesh.geometry.vertices;\n  var l = verts.length;\n  for (var i=0; i<l; i++){\n    var v = verts[i];\n    var vprops = this.waves[i];\n    v.x =  vprops.x + Math.cos(vprops.ang)*vprops.amp;\n    v.y = vprops.y + Math.sin(vprops.ang)*vprops.amp;\n    vprops.ang += vprops.speed*deltaTime;\n    this.mesh.geometry.verticesNeedUpdate=true;\n  }\n}\n\nvar Cloud = function(){\n  this.mesh = new THREE.Object3D();\n  this.mesh.name = \"cloud\";\n  var geom = new THREE.CubeGeometry(20,20,20);\n  var mat = new THREE.MeshPhongMaterial({\n    color:Colors.white,\n\n  });\n\n  //*\n  var nBlocs = 3+Math.floor(Math.random()*3);\n  for (var i=0; i<nBlocs; i++ ){\n    var m = new THREE.Mesh(geom.clone(), mat);\n    m.position.x = i*15;\n    m.position.y = Math.random()*10;\n    m.position.z = Math.random()*10;\n    m.rotation.z = Math.random()*Math.PI*2;\n    m.rotation.y = Math.random()*Math.PI*2;\n    var s = .1 + Math.random()*.9;\n    m.scale.set(s,s,s);\n    this.mesh.add(m);\n    m.castShadow = true;\n    m.receiveShadow = true;\n\n  }\n  //*/\n}\n\nCloud.prototype.rotate = function(){\n  var l = this.mesh.children.length;\n  for(var i=0; i<l; i++){\n    var m = this.mesh.children[i];\n    m.rotation.z+= Math.random()*.005*(i+1);\n    m.rotation.y+= Math.random()*.002*(i+1);\n  }\n}\n\nvar Ennemy = function(){\n  var geom = new THREE.TetrahedronGeometry(8,2);\n  var mat = new THREE.MeshPhongMaterial({\n    color:Colors.red,\n    shininess:0,\n    specular:0xffffff,\n    shading:THREE.FlatShading\n  });\n  this.mesh = new THREE.Mesh(geom,mat);\n  this.mesh.castShadow = true;\n  this.angle = 0;\n  this.dist = 0;\n}\n\nvar EnnemiesHolder = function (){\n  this.mesh = new THREE.Object3D();\n  this.ennemiesInUse = [];\n}\n\nEnnemiesHolder.prototype.spawnEnnemies = function(){\n  var nEnnemies = game.level;\n\n  for (var i=0; i<nEnnemies; i++){\n    var ennemy;\n    if (ennemiesPool.length) {\n      ennemy = ennemiesPool.pop();\n    }else{\n      ennemy = new Ennemy();\n    }\n\n    ennemy.angle = - (i*0.1);\n    ennemy.distance = game.seaRadius + game.planeDefaultHeight + (-1 + Math.random() * 2) * (game.planeAmpHeight-20);\n    ennemy.mesh.position.y = -game.seaRadius + Math.sin(ennemy.angle)*ennemy.distance;\n    ennemy.mesh.position.x = Math.cos(ennemy.angle)*ennemy.distance;\n\n    this.mesh.add(ennemy.mesh);\n    this.ennemiesInUse.push(ennemy);\n  }\n}\n\nvar particlesHolder, coinsHolder, ennemiesHolder;\n\nEnnemiesHolder.prototype.rotateEnnemies = function(){\n  for (var i=0; i<this.ennemiesInUse.length; i++){\n    var ennemy = this.ennemiesInUse[i];\n    ennemy.angle += game.speed*deltaTime*game.ennemiesSpeed;\n\n    if (ennemy.angle > Math.PI*2) ennemy.angle -= Math.PI*2;\n\n    ennemy.mesh.position.y = -game.seaRadius + Math.sin(ennemy.angle)*ennemy.distance;\n    ennemy.mesh.position.x = Math.cos(ennemy.angle)*ennemy.distance;\n    ennemy.mesh.rotation.z += Math.random()*.1;\n    ennemy.mesh.rotation.y += Math.random()*.1;\n\n    //var globalEnnemyPosition =  ennemy.mesh.localToWorld(new THREE.Vector3());\n    var diffPos = airplane.mesh.position.clone().sub(ennemy.mesh.position.clone());\n    var d = diffPos.length();\n    if (d<game.ennemyDistanceTolerance){\n      particlesHolder.spawnParticles(ennemy.mesh.position.clone(), 15, Colors.red, 3);\n\n      ennemiesPool.unshift(this.ennemiesInUse.splice(i,1)[0]);\n      this.mesh.remove(ennemy.mesh);\n      game.planeCollisionSpeedX = 100 * diffPos.x / d;\n      game.planeCollisionSpeedY = 100 * diffPos.y / d;\n      ambientLight.intensity = 2;\n\n      removeEnergy();\n      i--;\n    }else if (ennemy.angle > Math.PI){\n      ennemiesPool.unshift(this.ennemiesInUse.splice(i,1)[0]);\n      this.mesh.remove(ennemy.mesh);\n      i--;\n    }\n  }\n}\n\nvar Particle = function(){\n  var geom = new THREE.TetrahedronGeometry(3,0);\n  var mat = new THREE.MeshPhongMaterial({\n    color:0x009999,\n    shininess:0,\n    specular:0xffffff,\n    shading:THREE.FlatShading\n  });\n  this.mesh = new THREE.Mesh(geom,mat);\n}\n\nParticle.prototype.explode = function(pos, color, scale){\n  var _this = this;\n  var _p = this.mesh.parent;\n  this.mesh.material.color = new THREE.Color( color);\n  this.mesh.material.needsUpdate = true;\n  this.mesh.scale.set(scale, scale, scale);\n  var targetX = pos.x + (-1 + Math.random()*2)*50;\n  var targetY = pos.y + (-1 + Math.random()*2)*50;\n  var speed = .6+Math.random()*.2;\n  TweenMax.to(this.mesh.rotation, speed, {x:Math.random()*12, y:Math.random()*12});\n  TweenMax.to(this.mesh.scale, speed, {x:.1, y:.1, z:.1});\n  TweenMax.to(this.mesh.position, speed, {x:targetX, y:targetY, delay:Math.random() *.1, ease:Power2.easeOut, onComplete:function(){\n      if(_p) _p.remove(_this.mesh);\n      _this.mesh.scale.set(1,1,1);\n      particlesPool.unshift(_this);\n    }});\n}\n\nvar ParticlesHolder = function (){\n  this.mesh = new THREE.Object3D();\n  this.particlesInUse = [];\n}\n\nParticlesHolder.prototype.spawnParticles = function(pos, density, color, scale){\n\n  var nPArticles = density;\n  for (var i=0; i<nPArticles; i++){\n    var particle;\n    if (particlesPool.length) {\n      particle = particlesPool.pop();\n    }else{\n      particle = new Particle();\n    }\n    this.mesh.add(particle.mesh);\n    particle.mesh.visible = true;\n    var _this = this;\n    particle.mesh.position.y = pos.y;\n    particle.mesh.position.x = pos.x;\n    particle.explode(pos,color, scale);\n  }\n}\n\nvar Coin = function(){\n  var geom = new THREE.TetrahedronGeometry(5,0);\n  var mat = new THREE.MeshPhongMaterial({\n    color:0x009999,\n    shininess:0,\n    specular:0xffffff,\n\n    shading:THREE.FlatShading\n  });\n  this.mesh = new THREE.Mesh(geom,mat);\n  this.mesh.castShadow = true;\n  this.angle = 0;\n  this.dist = 0;\n}\n\nvar CoinsHolder = function (nCoins){\n  this.mesh = new THREE.Object3D();\n  this.coinsInUse = [];\n  this.coinsPool = [];\n  for (var i=0; i<nCoins; i++){\n    var coin = new Coin();\n    this.coinsPool.push(coin);\n  }\n}\n\nCoinsHolder.prototype.spawnCoins = function(){\n\n  var nCoins = 1 + Math.floor(Math.random()*10);\n  var d = game.seaRadius + game.planeDefaultHeight + (-1 + Math.random() * 2) * (game.planeAmpHeight-20);\n  var amplitude = 10 + Math.round(Math.random()*10);\n  for (var i=0; i<nCoins; i++){\n    var coin;\n    if (this.coinsPool.length) {\n      coin = this.coinsPool.pop();\n    }else{\n      coin = new Coin();\n    }\n    this.mesh.add(coin.mesh);\n    this.coinsInUse.push(coin);\n    coin.angle = - (i*0.02);\n    coin.distance = d + Math.cos(i*.5)*amplitude;\n    coin.mesh.position.y = -game.seaRadius + Math.sin(coin.angle)*coin.distance;\n    coin.mesh.position.x = Math.cos(coin.angle)*coin.distance;\n  }\n}\n\nCoinsHolder.prototype.rotateCoins = function(){\n  for (var i=0; i<this.coinsInUse.length; i++){\n    var coin = this.coinsInUse[i];\n    if (coin.exploding) continue;\n    coin.angle += game.speed*deltaTime*game.coinsSpeed;\n    if (coin.angle>Math.PI*2) coin.angle -= Math.PI*2;\n    coin.mesh.position.y = -game.seaRadius + Math.sin(coin.angle)*coin.distance;\n    coin.mesh.position.x = Math.cos(coin.angle)*coin.distance;\n    coin.mesh.rotation.z += Math.random()*.1;\n    coin.mesh.rotation.y += Math.random()*.1;\n\n    //var globalCoinPosition =  coin.mesh.localToWorld(new THREE.Vector3());\n    var diffPos = airplane.mesh.position.clone().sub(coin.mesh.position.clone());\n    var d = diffPos.length();\n    if (d<game.coinDistanceTolerance){\n      this.coinsPool.unshift(this.coinsInUse.splice(i,1)[0]);\n      this.mesh.remove(coin.mesh);\n      particlesHolder.spawnParticles(coin.mesh.position.clone(), 5, 0x009999, .8);\n      addEnergy();\n      i--;\n    }else if (coin.angle > Math.PI){\n      this.coinsPool.unshift(this.coinsInUse.splice(i,1)[0]);\n      this.mesh.remove(coin.mesh);\n      i--;\n    }\n  }\n}\n\n\n// 3D Models\nvar sea;\nvar airplane;\nvar sky;\n\nfunction createPlane(){\n  airplane = new AirPlane();\n  airplane.mesh.scale.set(.25,.25,.25);\n  airplane.mesh.position.y = game.planeDefaultHeight;\n  scene.add(airplane.mesh);\n}\n\nfunction createSea(){\n  sea = new Sea();\n  sea.mesh.position.y = -game.seaRadius;\n  scene.add(sea.mesh);\n}\n\nfunction createSky(){\n  sky = new Sky();\n  sky.mesh.position.y = -game.seaRadius;\n  scene.add(sky.mesh);\n}\n\nfunction createCoins(){\n\n  coinsHolder = new CoinsHolder(20);\n  scene.add(coinsHolder.mesh)\n}\n\nfunction createEnnemies(){\n  for (var i=0; i<10; i++){\n    var ennemy = new Ennemy();\n    ennemiesPool.push(ennemy);\n  }\n  ennemiesHolder = new EnnemiesHolder();\n  //ennemiesHolder.mesh.position.y = -game.seaRadius;\n  scene.add(ennemiesHolder.mesh)\n}\n\nfunction createParticles(){\n  for (var i=0; i<10; i++){\n    var particle = new Particle();\n    particlesPool.push(particle);\n  }\n  particlesHolder = new ParticlesHolder();\n  //ennemiesHolder.mesh.position.y = -game.seaRadius;\n  scene.add(particlesHolder.mesh)\n}\n\nfunction loop(){\n\n  newTime = new Date().getTime();\n  deltaTime = newTime-oldTime;\n  oldTime = newTime;\n\n  if (game.status === \"playing\"){\n\n    // Add energy coins every 100m;\n    if (Math.floor(game.distance)%game.distanceForCoinsSpawn === 0 && Math.floor(game.distance) > game.coinLastSpawn){\n      game.coinLastSpawn = Math.floor(game.distance);\n      coinsHolder.spawnCoins();\n    }\n\n    if (Math.floor(game.distance)%game.distanceForSpeedUpdate === 0 && Math.floor(game.distance) > game.speedLastUpdate){\n      game.speedLastUpdate = Math.floor(game.distance);\n      game.targetBaseSpeed += game.incrementSpeedByTime*deltaTime;\n    }\n\n\n    if (Math.floor(game.distance)%game.distanceForEnnemiesSpawn === 0 && Math.floor(game.distance) > game.ennemyLastSpawn){\n      game.ennemyLastSpawn = Math.floor(game.distance);\n      ennemiesHolder.spawnEnnemies();\n    }\n\n    if (Math.floor(game.distance)%game.distanceForLevelUpdate === 0 && Math.floor(game.distance) > game.levelLastUpdate){\n      game.levelLastUpdate = Math.floor(game.distance);\n      game.level++;\n      fieldLevel.innerHTML = Math.floor(game.level);\n\n      game.targetBaseSpeed = game.initSpeed + game.incrementSpeedByLevel*game.level\n    }\n\n\n    updatePlane();\n    updateDistance();\n    updateEnergy();\n    game.baseSpeed += (game.targetBaseSpeed - game.baseSpeed) * deltaTime * 0.02;\n    game.speed = game.baseSpeed * game.planeSpeed;\n\n  }else if(game.status === \"gameover\"){\n    game.speed *= .99;\n    airplane.mesh.rotation.z += (-Math.PI/2 - airplane.mesh.rotation.z)*.0002*deltaTime;\n    airplane.mesh.rotation.x += 0.0003*deltaTime;\n    game.planeFallSpeed *= 1.05;\n    airplane.mesh.position.y -= game.planeFallSpeed*deltaTime;\n\n    if (airplane.mesh.position.y <-200){\n      showReplay();\n      game.status = \"waitingReplay\";\n\n    }\n  }else if (game.status === \"waitingReplay\"){\n\n  }\n\n\n  airplane.propeller.rotation.x +=.2 + game.planeSpeed * deltaTime*.005;\n  sea.mesh.rotation.z += game.speed*deltaTime;//*game.seaRotationSpeed;\n\n  if ( sea.mesh.rotation.z > 2*Math.PI)  sea.mesh.rotation.z -= 2*Math.PI;\n\n  ambientLight.intensity += (.5 - ambientLight.intensity)*deltaTime*0.005;\n\n  coinsHolder.rotateCoins();\n  ennemiesHolder.rotateEnnemies();\n\n  sky.moveClouds();\n  sea.moveWaves();\n\n  renderer.render(scene, camera);\n  requestAnimationFrame(loop);\n}\n\nfunction updateDistance(){\n  game.distance += game.speed*deltaTime*game.ratioSpeedDistance;\n  fieldDistance.innerHTML = Math.floor(game.distance);\n  var d = 502*(1-(game.distance%game.distanceForLevelUpdate)/game.distanceForLevelUpdate);\n  levelCircle.setAttribute(\"stroke-dashoffset\", d);\n\n}\n\n//var blinkEnergy=false;\n\nfunction updateEnergy(){\n  game.energy -= game.speed*deltaTime*game.ratioSpeedEnergy;\n  game.energy = Math.max(0, game.energy);\n  energyBar.style.right = (100-game.energy)+\"%\";\n  energyBar.style.backgroundColor = (game.energy<50)? \"#f25346\" : \"#68c3c0\";\n\n  if (game.energy<30){\n    energyBar.style.animationName = \"blinking\";\n  }else{\n    energyBar.style.animationName = \"none\";\n  }\n\n  if (game.energy <1){\n    game.status = \"gameover\";\n  }\n}\n\nfunction addEnergy(){\n  game.energy += game.coinValue;\n  game.energy = Math.min(game.energy, 100);\n}\n\nfunction removeEnergy(){\n  game.energy -= game.ennemyValue;\n  game.energy = Math.max(0, game.energy);\n}\n\n\n\nfunction updatePlane(){\n\n  game.planeSpeed = normalize(mousePos.x,-.5,.5,game.planeMinSpeed, game.planeMaxSpeed);\n  var targetY = normalize(mousePos.y,-.75,.75,game.planeDefaultHeight-game.planeAmpHeight, game.planeDefaultHeight+game.planeAmpHeight);\n  var targetX = normalize(mousePos.x,-1,1,-game.planeAmpWidth*.7, -game.planeAmpWidth);\n\n  game.planeCollisionDisplacementX += game.planeCollisionSpeedX;\n  targetX += game.planeCollisionDisplacementX;\n\n\n  game.planeCollisionDisplacementY += game.planeCollisionSpeedY;\n  targetY += game.planeCollisionDisplacementY;\n\n  airplane.mesh.position.y += (targetY-airplane.mesh.position.y)*deltaTime*game.planeMoveSensivity;\n  airplane.mesh.position.x += (targetX-airplane.mesh.position.x)*deltaTime*game.planeMoveSensivity;\n\n  airplane.mesh.rotation.z = (targetY-airplane.mesh.position.y)*deltaTime*game.planeRotXSensivity;\n  airplane.mesh.rotation.x = (airplane.mesh.position.y-targetY)*deltaTime*game.planeRotZSensivity;\n  //var targetCameraZ = normalize(game.planeSpeed, game.planeMinSpeed, game.planeMaxSpeed, game.cameraNearPos, game.cameraFarPos);\n  camera.fov = normalize(mousePos.x,-1,1,40, 80);\n  camera.updateProjectionMatrix ()\n  camera.position.y += (airplane.mesh.position.y - camera.position.y)*deltaTime*game.cameraSensivity;\n\n  game.planeCollisionSpeedX += (0-game.planeCollisionSpeedX)*deltaTime * 0.03;\n  game.planeCollisionDisplacementX += (0-game.planeCollisionDisplacementX)*deltaTime *0.01;\n  game.planeCollisionSpeedY += (0-game.planeCollisionSpeedY)*deltaTime * 0.03;\n  game.planeCollisionDisplacementY += (0-game.planeCollisionDisplacementY)*deltaTime *0.01;\n\n  airplane.pilot.updateHairs();\n}\n\nfunction showReplay(){\n  replayMessage.style.display=\"block\";\n}\n\nfunction hideReplay(){\n  replayMessage.style.display=\"none\";\n}\n\nfunction normalize(v,vmin,vmax,tmin, tmax){\n  var nv = Math.max(Math.min(v,vmax), vmin);\n  var dv = vmax-vmin;\n  var pc = (nv-vmin)/dv;\n  var dt = tmax-tmin;\n  var tv = tmin + (pc*dt);\n  return tv;\n}\n\nvar fieldDistance, energyBar, replayMessage, fieldLevel, levelCircle;\n\nfunction init(event){\n\n  // UI\n\n  fieldDistance = document.getElementById(\"distValue\");\n  energyBar = document.getElementById(\"energyBar\");\n  replayMessage = document.getElementById(\"replayMessage\");\n  fieldLevel = document.getElementById(\"levelValue\");\n  levelCircle = document.getElementById(\"levelCircleStroke\");\n\n  resetGame();\n  createScene();\n\n  createLights();\n  createPlane();\n  createSea();\n  createSky();\n  createCoins();\n  createEnnemies();\n  createParticles();\n\n  document.addEventListener('mousemove', handleMouseMove, false);\n  document.addEventListener('touchmove', handleTouchMove, false);\n  document.addEventListener('mouseup', handleMouseUp, false);\n  document.addEventListener('touchend', handleTouchEnd, false);\n\n  loop();\n}\n\n/*window.addEventListener('load', init, false);*/\n\nexport default class extends Component {\n  constructor(props, context) {\n    super(props, context);\n    console.warn('constructor');\n    this.textRef = null;\n  }\n  componentWillMount() {\n    console.warn('componentWillMount');\n      \n  }\n  componentDidMount() {\n    console.warn('componentDidMount');\n    init(this.threeRootElement);\n  }\n  render () {\n    return (\n      <div className=\"aviator-1\">\n          <div className=\"game-holder\" id=\"gameHolder\">\n          <div className=\"header\">\n            <h1><span>the</span>Aviator</h1>\n            <h2>fly it to the end</h2>\n            <div className=\"score\" id=\"score\">\n              <div className=\"score__content\" id=\"level\">\n                <div className=\"score__label\">level</div>\n                <div className=\"score__value score__value--level\" id=\"levelValue\">1</div>\n                <svg className=\"level-circle\" id=\"levelCircle\" viewBox=\"0 0 200 200\">\n                  <circle id=\"levelCircleBgr\" r=\"80\" cx=\"100\" cy=\"100\" fill=\"none\" stroke=\"#d1b790\" strokeWidth=\"24px\" />\n                  <circle id=\"levelCircleStroke\" r=\"80\" cx=\"100\" cy=\"100\" fill=\"none\" stroke=\"#68c3c0\" strokeWidth=\"14px\" strokeDasharray=\"502\" />\n                </svg>\n              </div>\n              <div className=\"score__content\" id=\"dist\">\n                <div className=\"score__label\">distance</div>\n                <div className=\"score__value score__value--dist\" id=\"distValue\">000</div>\n              </div>\n              <div className=\"score__content\" id=\"energy\">\n                <div className=\"score__label\">energy</div>\n                <div className=\"score__value score__value--energy\" id=\"energyValue\">\n                  <div className=\"energy-bar\" id=\"energyBar\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"world\" id=\"world\"></div>\n          <div className=\"message message--replay\" id=\"replayMessage\">Click to Replay</div>\n          <div className=\"message message--instructions\" id=\"instructions\">Grab the blue pills<span>avoid the red ones</span></div>\n        </div>\n      </div>\n    );\n  }\n}"],"sourceRoot":""}